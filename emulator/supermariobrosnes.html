<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex" />
    <title>Super Mario Bros - NES</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    
<script type="text/javascript">
        $(function(){
        //$("select").fadeOut("fast");
            $.ajax({
                 type: "GET",
                 url: "https://ia904509.us.archive.org/cors_get.php?path=/22/items/BestOfNes/BestOfNes_files.xml",
                 dataType: "xml",
                 success: function(xml) {
                 
                    $(xml).find("file").each(function(){
                         var file =  $(this).attr("name");
                         var exfile = file.split(".");
                        if(exfile[1]=='zip'){
                         $("select").append('<option value="' + exfile[0] + '">' + exfile[0] + '</option>');
                        }
                     }); //close each(
                    //$("select").fadeIn("slow");
                }
             }); //close $.ajax(
            
            
    
    function gameUrlGet() {
        let queryString = window.location.search;
        let params = new URLSearchParams(queryString);
        params.delete('game');
        params.append('game', document.getElementById("game").value);
        document.location.href = "?" + params.toString();
    }
        });
</script>
</head>
<body>

<div style="width:640px;height:480px;max-width:100%;margin:0 auto;">
<select name="game" onchange="gameUrlGet()" id="game"></select>
<div id="player"></div>
</div>

<script type="text/javascript">
    
    var game = getUrlVars()["game"];
    
    EJS_pathtodata = 'data/';
    EJS_player = '#player';
    EJS_biosUrl = '';
    EJS_gameUrl = 'https://ia904509.us.archive.org/cors_get.php?path=/22/items/BestOfNes/' + game + '.zip';
    EJS_core = 'nes';
    EJS_onGameStart = function() {};
    
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        
        return vars;
    }
    
</script>

<script type="text/javascript" src="data/loader.js"></script>

<style>
html,body {margin:0;padding:0;}
</style>
</body>
</html>
